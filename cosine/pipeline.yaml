# ===============================================================
# COSINE.SH PIPELINE BLUEPRINT ‚Äì ‚ÄúPERSONAL & ALUNO‚Äù v2.0 ULTRA PRECISION
# Projeto PWA Fitness ‚Äì Base: create-t3-app / Integrado a GitHub + Supabase + Vercel
# ===============================================================

meta:
  name: "Personal & Aluno"
  version: "1.0-ultra"
  author: "Lucas"
  date_updated: "2025-10-23"
  source_repo: "GitHub (base create-t3-app j√° instalado)"
  integration_stack: ["Supabase (backend/auth/storage)", "Vercel (deploy/PWA)", "GitHub (CI/CD)"]
  principle: "Sem c√≥digo neste documento ‚Äî foco total em escopo, UX, arquitetura e entreg√°veis Cosine."

goal: >
  Evoluir o PWA ‚ÄúPersonal & Aluno‚Äù at√© sua vers√£o comercial completa, garantindo performance,
  estabilidade e experi√™ncia premium. O sistema deve permitir gest√£o total entre personal trainers
  e alunos, com fluxo de convite seguro, acompanhamento f√≠sico, relat√≥rios, chat, notifica√ß√µes e modo offline.

context: >
  O template T3 j√° est√° ativo (Next.js, Prisma, Tailwind, tRPC, Auth). Este pipeline amplia o app
  com funcionalidades espec√≠ficas para academia digital, respeitando pap√©is, acessos e v√≠nculo aluno-personal.
  O Cosine deve executar o projeto como pipeline de alto n√≠vel, com agentes independentes nas fases Plan‚ÜíLaunch.

roles:
  - personal:
      description: "Usu√°rio principal, cria convites, gerencia alunos, treinos, avalia√ß√µes e biblioteca."
      privileges: ["criar/editar convites", "gerir exerc√≠cios e treinos", "ler feedbacks", "chat", "notifica√ß√µes"]
  - aluno:
      description: "Usu√°rio convidado, executa treinos e envia feedbacks."
      privileges: ["acessar treino do dia", "ver hist√≥rico e progresso", "enviar feedback e mensagens"]
      restrictions: ["n√£o criar conta", "n√£o editar biblioteca", "n√£o convidar terceiros"]

pipeline:

  - stage: PLAN
    title: "Arquitetura Estrat√©gica e Modelagem do Sistema"
    description: >
      Consolidar toda a base l√≥gica, de dados e comportamento. O foco √© criar o blueprint total
      do sistema: pap√©is, entidades, integra√ß√µes e sincroniza√ß√£o.
    tasks:
      - "Mapear entidades e relacionamentos (usu√°rios, convites, treinos, execu√ß√µes, chat)."
      - "Detalhar fluxo de convites via e-mail: personal‚Üíaluno‚Üítoken‚Üíativa√ß√£o."
      - "Planejar cache offline, reconcilia√ß√£o e observabilidade."
      - "Documentar depend√™ncias GitHub‚ÜîSupabase‚ÜîVercel."
      - "Criar matriz de pap√©is e acessos."
      - "Definir KPIs de produto (ades√£o, uso offline, performance)."
    deliverables:
      - "Documento ‚ÄòArquitetura-Funcional.md‚Äô"
      - "Fluxograma convite‚Üíativa√ß√£o‚Üísincroniza√ß√£o"
      - "Plano de CI/CD e env vars"
    acceptance_criteria:
      - "Todos fluxos descritos, diagramados e revisados."
      - "Integra√ß√£o de ambiente configurada (GitHub, Supabase, Vercel)."

  - stage: DESIGN
    title: "Design UX/UI e Identidade Visual"
    description: >
      Criar uma experi√™ncia imersiva, profissional e emocionalmente envolvente. Padr√£o fitness premium:
      escuro, vibrante, motivacional e responsivo.
    tasks:
      - "Wireframes detalhados (login, convite, dashboard, treino, hist√≥rico, chat)."
      - "Design System: Tailwind + ShadCN/UI + tokens de cor e espa√ßamento."
      - "Tema: fundo preto/cinza, neon verde-lim√£o + azul el√©trico + roxo suave."
      - "Anima√ß√µes: timers, confete, vibra√ß√£o, check visual."
      - "UX Writing motivacional ('√öltima s√©rie, voc√™ consegue!', 'Treino conclu√≠do üí™')."
      - "Acessibilidade WCAG AA garantida."
    deliverables:
      - "UI Kit completo (JSON/YAML)"
      - "Prot√≥tipo naveg√°vel Figma"
      - "Guia de identidade visual (DesignSystem.md)"
    acceptance_criteria:
      - "Fluxo naveg√°vel mobile e desktop."
      - "Elementos consistentes e leg√≠veis."

  - stage: BUILD
    title: "Desenvolvimento e Integra√ß√£o Total"
    description: >
      Expandir o projeto T3 com m√≥dulos espec√≠ficos, autentica√ß√£o via convite e integra√ß√µes completas.
      Assegurar performance e sincroniza√ß√£o real-time.
    tasks:
      - "Implementar Supabase Auth com fluxo de convite:"
      - "Painel Personal: dashboard, convites, biblioteca, treinos, relat√≥rios e chat."
      - "Painel Aluno: treino do dia, execu√ß√£o passo a passo, feedback e progresso."
      - "Biblioteca de exerc√≠cios com filtros e upload de m√≠dia (Supabase Storage)."
      - "PWA completo (manifest, service worker, cache inteligente, instala√ß√£o)."
      - "Push notifications (novos treinos, mensagens, inatividade)."
      - "Deploy cont√≠nuo GitHub‚ÜíVercel."
    deliverables:
      - "Sistema funcional (staging ativo)"
      - "Manual de vari√°veis (Ops-Env.md)"
      - "Relat√≥rio de depend√™ncias (Deps.md)"
    acceptance_criteria:
      - "Convite‚Üíativa√ß√£o funcional ponta a ponta."
      - "Pain√©is personal/aluno operacionais."
      - "PWA offline funcional e responsivo."

  - stage: TEST
    title: "Qualidade, Seguran√ßa e Offline"
    description: >
      Garantir estabilidade, performance e seguran√ßa. Validar o fluxo de convites, modo offline e responsividade.
    tasks:
      - "Testes unit√°rios e funcionais (convite, login, treino, chat)."
      - "Testar reconex√£o e sincroniza√ß√£o offline."
      - "Valida√ß√£o de performance (Lighthouse)."
      - "Testes de acessibilidade e roles."
      - "Seguran√ßa: expira√ß√£o de tokens, restri√ß√£o de roles, uploads seguros."
    deliverables:
      - "QA Report (bugs, prioridades, fixes)"
      - "Perf Report (m√©tricas Lighthouse)"
      - "Checklist de roles (Security.md)"
    acceptance_criteria:
      - "TTI ‚â§ 2.5s, offline 100%, sem erros cr√≠ticos."
      - "100% roles restritos corretamente."

  - stage: REFINE
    title: "Polimento Est√©tico e Microintera√ß√µes"
    description: >
      Ajustar tom, ritmo e polimento visual do produto. Garantir que a experi√™ncia final seja emp√°tica e
      prazerosa, sem ru√≠dos ou fric√ß√£o.
    tasks:
      - "Revisar cores, anima√ß√µes e espa√ßamentos."
      - "Melhorar microintera√ß√µes (timers, loaders, feedback visual)."
      - "Refinar mensagens motivacionais e copywriting."
      - "Compress√£o e otimiza√ß√£o de m√≠dia (lazy loading)."
    deliverables:
      - "UI-Refine.md"
      - "Brand-Tone.md"
    acceptance_criteria:
      - "NPS interno ‚â• 8/10."
      - "Nenhum bug visual ou lag percept√≠vel."

  - stage: LAUNCH
    title: "Publica√ß√£o e Opera√ß√£o Cont√≠nua"
    description: >
      Publicar a vers√£o final e preparar ambiente operacional, documenta√ß√£o e rotinas de backup/monitoramento.
    tasks:
      - "Deploy final Vercel (produ√ß√£o)."
      - "Dom√≠nio + SSL configurados."
      - "Guia de uso (personal/aluno) + README t√©cnico no GitHub."
      - "Backup Supabase + alertas de logs."
      - "Gerar changelog v1.0."
    deliverables:
      - "PWA ativo e acess√≠vel publicamente."
      - "Documenta√ß√£o completa (Operacao.md)."
      - "Release GitHub est√°vel (tagged)."
    acceptance_criteria:
      - "Convites reais funcionando."
      - "Observabilidade online (logs + m√©tricas)."

data_model_conceptual:
  users:
    fields: [id, nome, email, role(personal|aluno), personal_id, foto_url, created_at]
    description: "V√≠nculo aluno‚Üípersonal."
  invites:
    fields: [id, email_aluno, personal_id, token, status, created_at, expires_at]
    description: "Controle do onboarding seguro via convite."
  exercicios:
    fields: [id, nome, grupo_muscular, dificuldade, equipamento, descricao, gif_url, autor_personal_id]
    description: "Biblioteca global + personalizada."
  treinos:
    fields: [id, aluno_id, nome, dias_semana, observacoes, created_at]
    description: "Treino completo vinculado a aluno."
  treino_exercicios:
    fields: [id, treino_id, exercicio_id, series, repeticoes, descanso, carga, obs]
  execucoes:
    fields: [id, treino_exercicio_id, data_execucao, series_completas, carga_usada, rpe, feedback_texto]
  mensagens:
    fields: [id, remetente_id, destinatario_id, texto, midia_url, lida, created_at]
    description: "Chat bidirecional."

theme:
  palette: ["#0a0a0a", "#00ff9d", "#009dff", "#a45eff"]
  typography: "Inter / Poppins"
  motion: ["Confete", "Timer Circular", "Vibra√ß√£o Curta", "Fade Suave"]
  tone: "Motivacional, humano e profissional."
  accessibility: ["Contraste 4.5:1", "Foco vis√≠vel", "Labels e ARIA completos"]

metrics:
  adoption: "‚â•90% convites aceitos"
  uptime: "99.9% aplica√ß√£o est√°vel"
  sync: "100% reconcilia√ß√£o offline sem perdas"
  feedbacks: "‚â•75% alunos enviando feedbacks semanais"

launch_notes: >
  Ao concluir este pipeline, o Cosine dever√° entregar um PWA fitness totalmente operacional,
  com convites seguros, pain√©is personalizados, chat, notifica√ß√µes e modo offline. O app deve ser
  moderno, leve, acess√≠vel e visualmente motivador, refletindo o profissionalismo do personal trainer
  e a disciplina do aluno.
